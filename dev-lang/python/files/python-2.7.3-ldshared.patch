This fixes the problem that when CC is set, the LDSHAREd is not
set accordingly on linux.
Upstream bug filed at https://bugs.python.org/issue24935

--- a/Lib/distutils/sysconfig.py	2015-08-24 11:58:37.265683872 -0700
+++ b/Lib/distutils/sysconfig.py	2015-08-24 11:57:29.673945173 -0700
@@ -180,9 +180,9 @@
             if _USE_CLANG:
                 newcc = 'clang'
         if newcc:
-            # On OS X, if CC is overridden, use that as the default
+            # On OS X and linux, if CC is overridden, use that as the default
             #       command for LDSHARED as well
-            if (sys.platform == 'darwin'
+            if ((sys.platform == 'darwin' or sys.platform.startswith('linux'))
                     and 'LDSHARED' not in os.environ
                     and ldshared.startswith(cc)):
                 ldshared = newcc + ldshared[len(cc):]
