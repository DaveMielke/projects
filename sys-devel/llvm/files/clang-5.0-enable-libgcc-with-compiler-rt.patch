Compiler-rt does not provide a default unwinder.
This patch links libgcc_eh when rtlib=compiler-rt.
-https://llvm.org/bugs/show_bug.cgi?id=28681
diff --git a/lib/Driver/ToolChains/CommonArgs.cpp b/lib/Driver/ToolChains/CommonArgs.cpp
index 5e360f62e2..2b53bde32f 100644
--- a/tools/clang/lib/Driver/ToolChains/CommonArgs.cpp
+++ b/tools/clang/lib/Driver/ToolChains/CommonArgs.cpp
@@ -982,10 +982,13 @@ void tools::AddRunTimeLibs(const ToolChain &TC, const Driver &D,
     default:
       llvm_unreachable("unsupported OS");
     case llvm::Triple::Win32:
-    case llvm::Triple::Linux:
     case llvm::Triple::Fuchsia:
       CmdArgs.push_back(TC.getCompilerRTArgString(Args, "builtins"));
       break;
+    case llvm::Triple::Linux:
+      CmdArgs.push_back(TC.getCompilerRTArgString(Args, "builtins"));
+      CmdArgs.push_back("-lgcc_eh");
+      break;
     }
     break;
   case ToolChain::RLT_Libgcc:
