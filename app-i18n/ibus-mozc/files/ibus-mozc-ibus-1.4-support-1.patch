--- unix/ibus/main.cc	2010-09-15 05:14:28.000000000 -0700
+++ unix/ibus/main.cc	2010-11-08 12:07:28.000000000 -0800
@@ -83,8 +83,13 @@
   GList *engines = ibus_component_get_engines(component);
   for (GList *p = engines; p; p = p->next) {
     IBusEngineDesc *engine = reinterpret_cast<IBusEngineDesc*>(p->data);
+#if IBUS_CHECK_VERSION(1, 3, 99)
+    const gchar * const engine_name = ibus_engine_desc_get_name(engine);
+#else
+    const gchar * const engine_name = engine->name;
+#endif
     ibus_factory_add_engine(
-        factory, engine->name, mozc::ibus::MozcEngine::GetType());
+        factory, engine_name, mozc::ibus::MozcEngine::GetType());
   }
 
   if (executed_by_ibus_daemon) {
