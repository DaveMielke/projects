diff -urN ../mozc-1.1.785.102.old/unix/ibus/mozc_engine.cc ./unix/ibus/mozc_engine.cc
--- ../mozc-1.1.785.102.old/unix/ibus/mozc_engine.cc	2011-08-12 11:25:58.638497767 +0900
+++ ./unix/ibus/mozc_engine.cc	2011-08-16 12:03:39.508596083 +0900
@@ -478,7 +478,6 @@
   // Stop ignoring "reset" signal.  See ProcessKeyevent().
   ignore_reset_for_deletion_range_workaround_ = false;
 
-  RevertSession(engine);
   SyncData(false);
 }
 
@@ -886,7 +887,9 @@
     return true;
   }
   IBusText *text = ComposePreeditText(output.preedit());
-  ibus_engine_update_preedit_text(engine, text, CursorPos(output), TRUE);
+  // Following change is related to crosbug.com/18555
+  ibus_engine_update_preedit_text_with_mode(engine, text, CursorPos(output),
+                                            TRUE, IBUS_ENGINE_PREEDIT_COMMIT);
   // |text| is released by ibus_engine_update_preedit_text.
   return true;
 }
