# Copyright 2016 The Chromium OS Authors. All rights reserved.
# Use of this source code is governed by a BSD-style license that can be
# found in the LICENSE file.

# Calculate hash of zlib source code as a fingerprint.
cros_post_src_configure_zlib_fingerprint() {
	printf '%s\n' *.[ch] | LC_ALL=C sort | xargs cat | sha256sum | \
		awk '{printf $1}' > zlib_fingerprint
}

# Install it to /etc/zlib_fingerprint, to be read by update_engine to
# determine if the current zlib version is compatible with IMGDIFF operation.
cros_post_src_install_zlib_fingerprint() {
	insinto /etc
	doins zlib_fingerprint
}

# chromeos-fonts does not build on elm (arm64) with latest llvm.
# https://crbug.com/667506
cros_pre_src_prepare_use_gcc() {
	cros_use_gcc
}
