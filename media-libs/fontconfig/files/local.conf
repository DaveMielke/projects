<?xml version="1.0"?>
<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
<fontconfig>

  <!-- Set preference for Ascender and Droid fonts -->
  <alias>
    <family>serif</family>
    <prefer>
      <family>Tinos</family>
      <family>Droid Serif</family>
      <family>Droid Arabic Naskh</family>
      <family>Droid Serif Thai</family>
      <family>Mangal</family>
      <family>Lohit Hindi</family>
      <family>Lohit Bangali</family>
      <family>Lohit Tamil</family>
      <family>Lohit Malayalam</family>
      <family>Lohit Punjabi</family>
      <family>Lohit Gujarati</family>
      <family>Lohit Oriya</family>
      <family>Abssinica SIL</family>
      <family>Song ASC</family>
      <family>PMingLiU</family>
      <family>NanumMyeongjo</family>
      <family>DejaVu Serif</family>
    </prefer>
  </alias>
  <alias>
    <family>sans-serif</family>
    <prefer>
      <family>Arimo</family>
      <family>Droid Sans</family>
      <family>Droid Arabic Kufi</family>
      <family>Droid Sans Thai</family>
      <family>Mangal</family>
      <family>Lohit Hindi</family>
      <family>Lohit Bangali</family>
      <family>Lohit Tamil</family>
      <family>Lohit Malayalam</family>
      <family>Lohit Punjabi</family>
      <family>Lohit Gujarati</family>
      <family>Lohit Oriya</family>
      <family>Abssinica SIL</family>
      <!-- Until we find out a way to get Droid Sans Fallback to work
           better with CJK characters, we have to
           put PMingLiU, Song ASC and NanumGothic before it even though
           PMingLiU and Song ASC are not sans-serif fonts. -->
      <family>Song ASC</family>
      <family>PMingLiU</family>
      <family>NanumGothic</family>
      <family>Droid Sans Fallback</family>
      <family>DejaVu Sans</family>
    </prefer>
  </alias>
  <alias>
    <family>monospace</family>
    <prefer>
      <family>Cousine</family>
      <family>Droid Sans Mono</family>
      <family>Droid Arabic Kufi</family>
      <family>Droid Sans Thai</family>
      <family>Mangal</family>
      <family>Lohit Hindi</family>
      <family>Lohit Bangali</family>
      <family>Lohit Tamil</family>
      <family>Lohit Malayalam</family>
      <family>Lohit Punjabi</family>
      <family>Lohit Gujarati</family>
      <family>Lohit Oriya</family>
      <family>Abssinica SIL</family>
      <!-- see the comment in sans-serif section -->
      <family>MingLiU</family>
      <family>N Song ASC</family>
      <family>NanumGothic</family>
      <family>Droid Sans Fallback</family>
      <family>DejaVu Sans Mono</family>
    </prefer>
  </alias>

 <!-- Set minimum font pixel size for cjk to 14px,
       which is 10.5pt under 96dpi. -->
  <match target="font">
    <test name="lang" compare="contains">
      <string>zh</string>
    </test>
    <test compare="less_eq" name="pixelsize" >
      <int>14</int>
    </test>
    <edit mode="assign" name="pixelsize" >
      <int>14</int>
    </edit>
  </match>

  <!-- TODO(jungshik): use 'OR' operator to turn on BCI on for
      multiple fonts after making sure that it works correctly -->
  <match target="font">
    <!-- Turn on BCI (turn off autohint) for Arimo -->
    <test name="family"><string>Arimo</string></test>
    <edit name="hinting" mode="assign"><bool>true</bool></edit>
    <edit name="hintstyle" mode="assign"><const>hintfull</const></edit>
    <edit name="autohint" mode="assign"><bool>false</bool></edit>
  </match>

  <match target="font">
    <!-- Turn on light autohinting for Chrome Droid Sans -->
    <test name="family"><string>Chrome Droid Sans</string></test>
    <edit name="hinting" mode="assign"><bool>true</bool></edit>
    <edit name="hintstyle" mode="assign"><const>hintslight</const></edit>
    <edit name="autohint" mode="assign"><bool>true</bool></edit>
  </match>

  <match target="font">
    <!-- Turn on BCI (turn off autohint) for Cousine -->
    <test name="family"><string>Cousine</string></test>
    <edit name="hinting" mode="assign"><bool>true</bool></edit>
    <edit name="hintstyle" mode="assign"><const>hintfull</const></edit>
    <edit name="autohint" mode="assign"><bool>false</bool></edit>
  </match>

  <match target="font">
    <!-- Turn on BCI (turn off autohint) for Tinos -->
    <test name="family"><string>Tinos</string></test>
    <edit name="hinting" mode="assign"><bool>true</bool></edit>
    <edit name="hintstyle" mode="assign"><const>hintfull</const></edit>
    <edit name="autohint" mode="assign"><bool>false</bool></edit>
  </match>

  <match target="font">
    <!-- Turn off hinting for IPA -->
    <test name="family" compare="contains"><string>IPA</string></test>
    <edit name="hinting" mode="assign"><bool>false</bool></edit>
    <edit name="hintstyle" mode="assign"><const>hintnone</const></edit>
    <edit name="autohint" mode="assign"><bool>false</bool></edit>
  </match>

  <match target="font">
    <!-- Turn on BCI (turn off autohint) for NanumGothic.
         We don't do that for NanumMyeongjo because somehow
         its BCI hint leads to a very poor rendering with freetype. -->
    <test name="family"><string>NanumGothic</string></test>
    <edit name="hinting" mode="assign"><bool>true</bool></edit>
    <edit name="hintstyle" mode="assign"><const>hintfull</const></edit>
    <edit name="autohint" mode="assign"><bool>false</bool></edit>
  </match>


  <!--  Make IPA fonts to aliases of the corresponding Windows Japanese
        fonts -->
  <alias binding="same">
    <family>IPAPGothic</family>
    <default>
      <family>MS PGothic</family>
    </default>
  </alias>
  <alias binding="same">
    <family>IPAPGothic</family>
    <default>
      <family>ＭＳ Ｐゴシック</family>
    </default>
  </alias>
  <alias binding="same">
    <family>MS PGothic</family>
    <accept>
    <family>IPAPGothic</family>
    </accept>
  </alias>
  <alias binding="same">
    <family>ＭＳ Ｐゴシック</family>
    <accept>
    <family>IPAPGothic</family>
    </accept>
  </alias>

  <alias binding="same">
    <family>IPAGothic</family>
    <default>
      <family>MS Gothic</family>
    </default>
  </alias>
  <alias binding="same">
    <family>IPAGothic</family>
    <default>
      <family>ＭＳ ゴシック</family>
    </default>
  </alias>
  <alias binding="same">
    <family>MS Gothic</family>
    <accept>
    <family>IPAGothic</family>
    </accept>
  </alias>
  <alias binding="same">
    <family>ＭＳ ゴシック</family>
    <accept>
    <family>IPAGothic</family>
    </accept>
  </alias>

  <alias binding="same">
    <family>IPAMincho</family>
    <default>
      <family>MS Mincho</family>
    </default>
  </alias>
  <alias binding="same">
    <family>IPAMincho</family>
    <default>
      <family>ＭＳ 明朝</family>
    </default>
  </alias>
  <alias binding="same">
    <family>MS Mincho</family>
    <accept>
    <family>IPAMincho</family>
    </accept>
  </alias>
  <alias binding="same">
    <family>ＭＳ 明朝</family>
    <accept>
    <family>IPAMincho</family>
    </accept>
  </alias>

  <alias binding="same">
    <family>IPAPMincho</family>
    <default>
      <family>MS PMincho</family>
    </default>
  </alias>
  <alias binding="same">
    <family>IPAPMincho</family>
    <default>
      <family>ＭＳ Ｐ明朝</family>
    </default>
  </alias>
  <alias binding="same">
    <family>MS PMincho</family>
    <accept>
    <family>IPAPMincho</family>
    </accept>
  </alias>
  <alias binding="same">
    <family>ＭＳ Ｐ明朝</family>
    <accept>
    <family>IPAPMincho</family>
    </accept>
  </alias>

  <!-- Aliases for Simplified Chinese Windows fonts.
       They're metric-compatible equivalent. -->
  <alias binding="same">
    <family>Song ASC</family>
    <default>
      <family>Simsun</family>
    </default>
  </alias>
  <alias binding="same">
    <family>Song ASC</family>
    <default>
      <family>宋体</family>
    </default>
  </alias>
  <alias binding="same">
    <family>Simsun</family>
    <accept>
    <family>Song ASC</family>
    </accept>
  </alias>
  <alias binding="same">
    <family>宋体</family>
    <accept>
    <family>Song ASC</family>
    </accept>
  </alias>

  <alias binding="same">
    <family>N Song ASC</family>
    <default>
      <family>NSimsun</family>
    </default>
  </alias>
  <alias binding="same">
    <family>N Song ASC</family>
    <default>
      <family>新宋体</family>
    </default>
  </alias>
  <alias binding="same">
    <family>NSimsun</family>
    <accept>
    <family>N Song ASC</family>
    </accept>
  </alias>
  <alias binding="same">
    <family>新宋体</family>
    <accept>
    <family>N Song ASC</family>
    </accept>
  </alias>

  <!-- Aliases for Korean Windows fonts.
       TODO(jungshik): Shuld we get NanumGothic/Myeongjo aliased to
       Windows fonts with binding=same as is done for IPA fonts to
       Windows Japanese fonts?
  -->
  <alias>
      <family>Gulim</family>
      <family>굴림</family>
      <family>GulimChe</family>
      <family>굴림체</family>
      <family>Dotum</family>
      <family>돋움</family>
      <family>Dotumche</family>
      <family>돋움체</family>
      <family>MalgunGothic</family>
      <family>맑은고딕</family>
      <accept>
          <family>NanumGothic</family>
      </accept>
  </alias>
  <alias>
      <family>Batang</family>
      <family>바탕</family>
      <family>Batangche</family>
      <family>바탕체</family>
      <accept>
          <family>NanumMyeongjo</family>
      </accept>
  </alias>

  <!-- Preferred fonts for Simplified Chinese -->
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>zh-CN</string>
    </test>
    <test name="family">
      <string>serif</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>Song ASC</string>
    </edit>
  </match>
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>zh-CN</string>
    </test>
    <test name="family">
      <string>sans-serif</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>Droid Sans Fallback</string>
    </edit>
  </match>
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>zh-CN</string>
    </test>
    <test name="family">
      <string>monospace</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>N Song ASC</string>
    </edit>
  </match>

  <!-- Preferred fonts for Traditional Chinese -->
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>zh-TW</string>
    </test>
    <test name="family">
      <string>serif</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>PMingLiu</string>
    </edit>
  </match>
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>zh-TW</string>
    </test>
    <test name="family">
      <string>sans-serif</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>Droid Sans Fallback</string>
    </edit>
  </match>
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>zh-TW</string>
    </test>
    <test name="family">
      <string>monospace</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>MingLiu</string>
    </edit>
  </match>

  <!-- Preferred fonts for Japanese -->
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>ja</string>
    </test>
    <test name="family">
      <string>serif</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>IPAPMincho</string>
    </edit>
  </match>
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>ja</string>
    </test>
    <test name="family">
      <string>sans-serif</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>IPAPGothic</string>
    </edit>
  </match>
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>ja</string>
    </test>
    <test name="family">
      <string>monospace</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>IPAGothic</string>
    </edit>
  </match>

  <!-- Preferred fonts for Korean -->
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>ko</string>
    </test>
    <test name="family">
      <string>serif</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>NanumMyeongjo</string>
    </edit>
  </match>
  <match target="pattern">
    <test name="lang" compare="contains">
      <string>ko</string>
    </test>
    <test name="family">
      <string>sans-serif</string>
    </test>
    <edit name="family" mode="prepend" binding="strong">
      <string>NanumGothic</string>
    </edit>
  </match>

  <match target="font">
    <test name="family" compare="contains">
      <string>Song ASC</string>
      <string>N Song ASC</string>
    </test>

    <!-- Turn on light auto-hint instead of using bitmap glyphs. -->
    <!-- Turn off sub-pixel anti-aliasing -->
    <edit name="hinting" mode="assign"><bool>true</bool></edit>
    <edit name="autohint" mode="assign"><bool>true</bool></edit>
    <edit name="hintstyle" mode="assign"><const>hintslight</const></edit>
    <edit name="antialias" mode="assign"><bool>true</bool></edit>
    <edit name="embeddedbitmap"><bool>false</bool></edit>
    <edit name="rgba" mode="assign"><const>none</const></edit>
  </match>

  <match target="font">
    <test name="family" compare="contains">
      <string>PMingLiU</string>
      <string>MingLiU</string>
    </test>

    <!-- Turn on BCI hint instead of using bitmap glyphs.
         Because these fonts do not have bitmap glyphs at 14px,
         there's a sudden 'jump' in the rendering when the size
         changes to/from 14px.
         We don't use auto-hint, either because it does not work well
         due to BCIs used to move and scale component glyphs in these
         fonts. -->
    <!-- Turn off sub-pixel anti-aliasing -->
    <edit name="hinting" mode="assign"><bool>true</bool></edit>
    <edit name="autohint" mode="assign"><bool>false</bool></edit>
    <edit name="hintstyle" mode="assign"><const>hintfull</const></edit>
    <edit name="antialias" mode="assign"><bool>true</bool></edit>
    <edit name="embeddedbitmap"><bool>false</bool></edit>
    <edit name="rgba" mode="assign"><const>none</const></edit>
  </match>

</fontconfig>
