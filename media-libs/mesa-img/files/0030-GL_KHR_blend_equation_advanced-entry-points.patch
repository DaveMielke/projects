From 3c5db932512991942adf46d9e03642b7099894d5 Mon Sep 17 00:00:00 2001
From: Rufus Hamade <rufus.hamade@imgtec.com>
Date: Wed, 17 Jun 2015 14:16:15 +0100
Subject: [PATCH] GL_KHR_blend_equation_advanced entry points.

Change-Id: I1e90f75f8ed630cfd7a009c71e73f45050cd0b4e
---
 src/mapi/glapi/gen/KHR_blend_equation_advanced.xml |  31 +
 src/mapi/glapi/gen/es_EXT.xml                      |   4 +-
 src/mesa/main/blend.c                              |   6 +
 src/mesa/main/blend.h                              |   3 +
 5 files changed, 985 insertions(+), 1 deletion(-)
 create mode 100644 src/mapi/glapi/gen/KHR_blend_equation_advanced.xml
 create mode 100644 src/mapi/glapi/gen/es_EXT.xml.orig

diff --git a/src/mapi/glapi/gen/KHR_blend_equation_advanced.xml b/src/mapi/glapi/gen/KHR_blend_equation_advanced.xml
new file mode 100644
index 0000000..22a80dd
--- /dev/null
+++ b/src/mapi/glapi/gen/KHR_blend_equation_advanced.xml
@@ -0,0 +1,31 @@
+<?xml version="1.0"?>
+<!DOCTYPE OpenGLAPI SYSTEM "gl_API.dtd">
+
+<OpenGLAPI>
+
+  <category name="GL_KHR_blend_equation_advanced" number="168">
+    <enum name="BLEND_ADVANCED_COHERENT_KHR"      value="0x9285"/>
+
+    <enum name="MULTIPLY_KHR"                     value="0x9294"/>
+    <enum name="SCREEN_KHR"                       value="0x9295"/>
+    <enum name="OVERLAY_KHR"                      value="0x9296"/>
+    <enum name="DARKEN_KHR"                       value="0x9297"/>
+    <enum name="LIGHTEN_KHR"                      value="0x9298"/>
+    <enum name="COLORDODGE_KHR"                   value="0x9299"/>
+    <enum name="COLORBURN_KHR"                    value="0x929A"/>
+    <enum name="HARDLIGHT_KHR"                    value="0x929B"/>
+    <enum name="SOFTLIGHT_KHR"                    value="0x929C"/>
+    <enum name="DIFFERENCE_KHR"                   value="0x929E"/>
+    <enum name="EXCLUSION_KHR"                    value="0x92A0"/>
+
+    <enum name="HSL_HUE_KHR"                      value="0x92AD"/>
+    <enum name="HSL_SATURATION_KHR"               value="0x92AE"/>
+    <enum name="HSL_COLOR_KHR"                    value="0x92AF"/>
+    <enum name="HSL_LUMINOSITY_KHR"               value="0x92B0"/>
+
+    <function name="BlendBarrierKHR" offset="assign" static_dispatch="false">
+    </function>
+
+  </category>
+</OpenGLAPI>
+
diff --git a/src/mapi/glapi/gen/es_EXT.xml b/src/mapi/glapi/gen/es_EXT.xml
index 649f2f0..702b514 100644
--- a/src/mapi/glapi/gen/es_EXT.xml
+++ b/src/mapi/glapi/gen/es_EXT.xml
@@ -935,8 +935,10 @@
     </function>
 </category>
 
+<!-- 168. GL_KHR_blend_equation_advanced -->
+<xi:include href="KHR_blend_equation_advanced.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
+
 <!-- 190. GL_KHR_robustness -->
 <xi:include href="KHR_robustness.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
 
-
 </OpenGLAPI>
diff --git a/src/mesa/main/blend.c b/src/mesa/main/blend.c
index c37c0fe..48a09c2 100644
--- a/src/mesa/main/blend.c
+++ b/src/mesa/main/blend.c
@@ -549,6 +549,12 @@ _mesa_BlendColor( GLclampf red, GLclampf green, GLclampf blue, GLclampf alpha )
       (*ctx->Driver.BlendColor)(ctx, ctx->Color.BlendColor);
 }
 
+void GLAPIENTRY
+_mesa_BlendBarrierKHR(void)
+{
+   GET_CURRENT_CONTEXT(ctx);
+   _mesa_error(ctx, GL_INVALID_OPERATION, "glBlendBarrierKHR");
+}
 
 /**
  * Specify the alpha test function.
diff --git a/src/mesa/main/blend.h b/src/mesa/main/blend.h
index fe31a74..7ab80f0 100644
--- a/src/mesa/main/blend.h
+++ b/src/mesa/main/blend.h
@@ -78,6 +78,9 @@ _mesa_BlendColor(GLclampf red, GLclampf green, GLclampf blue, GLclampf alpha);
 
 
 extern void GLAPIENTRY
+_mesa_BlendBarrierKHR(void);
+
+extern void GLAPIENTRY
 _mesa_AlphaFunc( GLenum func, GLclampf ref );
 
 
-- 
2.1.2

