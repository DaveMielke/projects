From b658d8d7c0c29ca54033f51da547cefec7398ad5 Mon Sep 17 00:00:00 2001
From: Qijiang Fan <fqj@chromium.org>
Date: Tue, 17 Dec 2019 14:19:51 +0900
Subject: [PATCH 2/5] backward compatibiliy patch

Change-Id: Id5b8e818bbd6a22874a422379c2079d731a6a58e
---
 base/values.cc           |  4 ++++
 base/values.h            |  3 +++
 2 files changed, 7 insertions(+)

diff --git a/base/values.cc b/base/values.cc
index a48af5e..a31b1ed 100644
--- a/base/values.cc
+++ b/base/values.cc
@@ -187,6 +187,10 @@ Value& Value::operator=(Value&& that) noexcept {
   return *this;
 }
 
+Value* Value::operator->() const {
+  return (base::Value*) this;
+}
+
 Value Value::Clone() const {
   switch (type_) {
     case Type::NONE:
diff --git a/base/values.h b/base/values.h
index 85113d9..08fbc68 100644
--- a/base/values.h
+++ b/base/values.h
@@ -141,6 +141,9 @@ class BASE_EXPORT Value {
 
   Value& operator=(Value&& that) noexcept;
 
+  // Backward compatibility when ListValue has element to be unique_ptr<Value>
+  Value* operator->() const;
+
   ~Value();
 
   // Returns the name for a given |type|.
-- 
2.24.1.735.g03f4e72817-goog

